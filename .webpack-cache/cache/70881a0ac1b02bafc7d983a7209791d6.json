{"remainingRequest":"/wiki/node_modules/babel-loader/lib/index.js??ref--0-1!/wiki/node_modules/vue-loader/lib/index.js??vue-loader-options!/wiki/client/components/editor/editor-asciidoc.vue?vue&type=script&lang=js&","dependencies":[{"path":"/wiki/client/components/editor/editor-asciidoc.vue","mtime":1742104565005},{"path":"/wiki/.babelrc","mtime":1742104564943},{"path":"/wiki/node_modules/cache-loader/dist/cjs.js","mtime":1742128641734},{"path":"/wiki/node_modules/babel-loader/lib/index.js","mtime":1742128638731},{"path":"/wiki/node_modules/vue-loader/lib/index.js","mtime":1742128750323}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zZXQgZnJvbSAibG9kYXNoL3NldCI7CmltcG9ydCBfbGFzdCBmcm9tICJsb2Rhc2gvbGFzdCI7CmltcG9ydCBfc3RhcnRzV2l0aCBmcm9tICJsb2Rhc2gvc3RhcnRzV2l0aCI7CmltcG9ydCBfdGltZXMgZnJvbSAibG9kYXNoL3RpbWVzIjsKaW1wb3J0IF9mbGF0dGVuIGZyb20gImxvZGFzaC9mbGF0dGVuIjsKaW1wb3J0IF9kZWJvdW5jZSBmcm9tICJsb2Rhc2gvZGVib3VuY2UiOwppbXBvcnQgeyBnZXQsIHN5bmMgfSBmcm9tICd2dWV4LXBhdGhpZnknOwppbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gSU1QT1JUUwovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIENvZGUgTWlycm9yCgppbXBvcnQgQ29kZU1pcnJvciBmcm9tICdjb2RlbWlycm9yJzsKaW1wb3J0ICdjb2RlbWlycm9yL2xpYi9jb2RlbWlycm9yLmNzcyc7IC8vIExhbmd1YWdlCgppbXBvcnQgJ2NvZGVtaXJyb3ItYXNjaWlkb2MnOyAvLyBBZGRvbnMKCmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWxlY3Rpb24vYWN0aXZlLWxpbmUuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZGlzcGxheS9mdWxsc2NyZWVuLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2Rpc3BsYXkvZnVsbHNjcmVlbi5jc3MnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vc2VsZWN0aW9uL21hcmstc2VsZWN0aW9uLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL3NlYXJjaC9zZWFyY2hjdXJzb3IuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vaGludC9zaG93LWhpbnQuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZm9sZC9mb2xkY29kZS5qcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9mb2xkL2ZvbGRndXR0ZXIuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZm9sZC9mb2xkZ3V0dGVyLmNzcyc7CmltcG9ydCBjbUZvbGQgZnJvbSAnLi9jb21tb24vY21Gb2xkJzsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBJTklUCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmNvbnN0IGFzY2lpZG9jdG9yID0gcmVxdWlyZSgnYXNjaWlkb2N0b3InKSgpOwoKY29uc3QgY2hlZXJpbyA9IHJlcXVpcmUoJ2NoZWVyaW8nKTsgLy8gUGxhdGZvcm0gZGV0ZWN0aW9uCgoKY29uc3QgQ3RybEtleSA9IC9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSA/ICdDbWQnIDogJ0N0cmwnOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIEhFTFBFUiBGVU5DVElPTlMKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKY21Gb2xkLnJlZ2lzdGVyKCdhc2NpaWRvYycpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFZ1ZSBDb21wb25lbnQKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjbTogbnVsbCwKICAgICAgY3Vyc29yUG9zOiB7CiAgICAgICAgY2g6IDAsCiAgICAgICAgbGluZTogMQogICAgICB9LAogICAgICBwcmV2aWV3U2hvd246IHRydWUsCiAgICAgIC8vIFRPRE8KICAgICAgaW5zZXJ0TGlua0RpYWxvZzogZmFsc2UsCiAgICAgIGhlbHBTaG93bjogZmFsc2UsCiAgICAgIHByZXZpZXdIVE1MOiAnJwogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgaXNNb2JpbGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQuc21BbmREb3duOwogICAgfSwKCiAgICBpc01vZGFsU2hvd24oKSB7CiAgICAgIHJldHVybiB0aGlzLmhlbHBTaG93biB8fCB0aGlzLmFjdGl2ZU1vZGFsICE9PSAnJzsKICAgIH0sCgogICAgbG9jYWxlOiBnZXQoJ3BhZ2UvbG9jYWxlJyksCiAgICBwYXRoOiBnZXQoJ3BhZ2UvcGF0aCcpLAogICAgbW9kZTogZ2V0KCdlZGl0b3IvbW9kZScpLAogICAgYWN0aXZlTW9kYWw6IHN5bmMoJ2VkaXRvci9hY3RpdmVNb2RhbCcpCiAgfSwKICBtZXRob2RzOiB7CiAgICB0b2dnbGVNb2RhbChrZXkpIHsKICAgICAgdGhpcy5hY3RpdmVNb2RhbCA9IHRoaXMuYWN0aXZlTW9kYWwgPT09IGtleSA/ICcnIDoga2V5OwogICAgICB0aGlzLmhlbHBTaG93biA9IGZhbHNlOwogICAgfSwKCiAgICBjbG9zZUFsbE1vZGFsKCkgewogICAgICB0aGlzLmFjdGl2ZU1vZGFsID0gJyc7CiAgICAgIHRoaXMuaGVscFNob3duID0gZmFsc2U7CiAgICB9LAoKICAgIG9uQ21JbnB1dDogX2RlYm91bmNlKGZ1bmN0aW9uIChuZXdDb250ZW50KSB7CiAgICAgIHRoaXMucHJvY2Vzc0NvbnRlbnQobmV3Q29udGVudCk7CiAgICB9LCA2MDApLAoKICAgIHByb2Nlc3NDb250ZW50KG5ld0NvbnRlbnQpIHsKICAgICAgdGhpcy5wcm9jZXNzTWFya2Vycyh0aGlzLmNtLmZpcnN0TGluZSgpLCB0aGlzLmNtLmxhc3RMaW5lKCkpOwogICAgICBsZXQgaHRtbCA9IGFzY2lpZG9jdG9yLmNvbnZlcnQobmV3Q29udGVudCwgewogICAgICAgIHN0YW5kYWxvbmU6IGZhbHNlLAogICAgICAgIHNhZmU6ICdzYWZlJywKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICBzaG93dGl0bGU6IHRydWUsCiAgICAgICAgICBpY29uczogJ2ZvbnQnCiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChodG1sLCB7CiAgICAgICAgZGVjb2RlRW50aXRpZXM6IHRydWUKICAgICAgfSk7CiAgICAgICQoJ3ByZS5oaWdobGlnaHQgPiBjb2RlLmxhbmd1YWdlLWRpYWdyYW0nKS5lYWNoKChpLCBlbG0pID0+IHsKICAgICAgICBjb25zdCBkaWFncmFtQ29udGVudCA9IEJ1ZmZlci5mcm9tKCQoZWxtKS5odG1sKCksICdiYXNlNjQnKS50b1N0cmluZygpOwogICAgICAgICQoZWxtKS5wYXJlbnQoKS5yZXBsYWNlV2l0aChgPHByZSBjbGFzcz0iZGlhZ3JhbSI+JHtkaWFncmFtQ29udGVudH08L2Rpdj5gKTsKICAgICAgfSk7CiAgICAgIHRoaXMucHJldmlld0hUTUwgPSBET01QdXJpZnkuc2FuaXRpemUoJC5odG1sKCksIHsKICAgICAgICBBRERfVEFHUzogWydmb3JlaWduT2JqZWN0J10KICAgICAgfSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEluc2VydCBjb250ZW50IGF0IGN1cnNvcg0KICAgICAqLwogICAgaW5zZXJ0QXRDdXJzb3IoewogICAgICBjb250ZW50CiAgICB9KSB7CiAgICAgIGNvbnN0IGN1cnNvciA9IHRoaXMuY20uZG9jLmdldEN1cnNvcignaGVhZCcpOwogICAgICB0aGlzLmNtLmRvYy5yZXBsYWNlUmFuZ2UoY29udGVudCwgY3Vyc29yKTsKICAgIH0sCgogICAgLyoqDQogICAgICogSW5zZXJ0IGNvbnRlbnQgYWZ0ZXIgY3VycmVudCBsaW5lDQogICAgICovCiAgICBpbnNlcnRBZnRlcih7CiAgICAgIGNvbnRlbnQsCiAgICAgIG5ld0xpbmUKICAgIH0pIHsKICAgICAgY29uc3QgY3VyTGluZSA9IHRoaXMuY20uZG9jLmdldEN1cnNvcigndG8nKS5saW5lOwogICAgICBjb25zdCBsaW5lTGVuZ3RoID0gdGhpcy5jbS5kb2MuZ2V0TGluZShjdXJMaW5lKS5sZW5ndGg7CiAgICAgIHRoaXMuY20uZG9jLnJlcGxhY2VSYW5nZShuZXdMaW5lID8gYFxuJHtjb250ZW50fVxuYCA6IGNvbnRlbnQsIHsKICAgICAgICBsaW5lOiBjdXJMaW5lLAogICAgICAgIGNoOiBsaW5lTGVuZ3RoICsgMQogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICogSW5zZXJ0IGNvbnRlbnQgYmVmb3JlIGN1cnJlbnQgbGluZQ0KICAgICAqLwogICAgaW5zZXJ0QmVmb3JlRWFjaExpbmUoewogICAgICBjb250ZW50LAogICAgICBhZnRlcgogICAgfSkgewogICAgICBsZXQgbGluZXMgPSBbXTsKCiAgICAgIGlmICghdGhpcy5jbS5kb2Muc29tZXRoaW5nU2VsZWN0ZWQoKSkgewogICAgICAgIGxpbmVzLnB1c2godGhpcy5jbS5kb2MuZ2V0Q3Vyc29yKCdoZWFkJykubGluZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGluZXMgPSBfZmxhdHRlbih0aGlzLmNtLmRvYy5saXN0U2VsZWN0aW9ucygpLm1hcChzbCA9PiB7CiAgICAgICAgICBjb25zdCByYW5nZSA9IE1hdGguYWJzKHNsLmFuY2hvci5saW5lIC0gc2wuaGVhZC5saW5lKSArIDE7CiAgICAgICAgICBjb25zdCBsb3dlc3RMaW5lID0gc2wuYW5jaG9yLmxpbmUgPiBzbC5oZWFkLmxpbmUgPyBzbC5oZWFkLmxpbmUgOiBzbC5hbmNob3IubGluZTsKICAgICAgICAgIHJldHVybiBfdGltZXMocmFuZ2UsIGwgPT4gbCArIGxvd2VzdExpbmUpOwogICAgICAgIH0pKTsKICAgICAgfQoKICAgICAgbGluZXMuZm9yRWFjaChsbiA9PiB7CiAgICAgICAgbGV0IGxpbmVDb250ZW50ID0gdGhpcy5jbS5kb2MuZ2V0TGluZShsbik7CiAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGxpbmVDb250ZW50Lmxlbmd0aDsKCiAgICAgICAgaWYgKF9zdGFydHNXaXRoKGxpbmVDb250ZW50LCBjb250ZW50KSkgewogICAgICAgICAgbGluZUNvbnRlbnQgPSBsaW5lQ29udGVudC5zdWJzdHJpbmcoY29udGVudC5sZW5ndGgpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jbS5kb2MucmVwbGFjZVJhbmdlKGNvbnRlbnQgKyBsaW5lQ29udGVudCwgewogICAgICAgICAgbGluZTogbG4sCiAgICAgICAgICBjaDogMAogICAgICAgIH0sIHsKICAgICAgICAgIGxpbmU6IGxuLAogICAgICAgICAgY2g6IGxpbmVMZW5ndGgKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICBpZiAoYWZ0ZXIpIHsKICAgICAgICBjb25zdCBsYXN0TGluZSA9IF9sYXN0KGxpbmVzKTsKCiAgICAgICAgdGhpcy5jbS5kb2MucmVwbGFjZVJhbmdlKGBcbiR7YWZ0ZXJ9XG5gLCB7CiAgICAgICAgICBsaW5lOiBsYXN0TGluZSwKICAgICAgICAgIGNoOiB0aGlzLmNtLmRvYy5nZXRMaW5lKGxhc3RMaW5lKS5sZW5ndGggKyAxCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogVXBkYXRlIGN1cnNvciBzdGF0ZQ0KICAgICAqLwogICAgcG9zaXRpb25TeW5jKGNtKSB7CiAgICAgIHRoaXMuY3Vyc29yUG9zID0gY20uZ2V0Q3Vyc29yKCdoZWFkJyk7CiAgICB9LAoKICAgIHRvZ2dsZU1hcmt1cCh7CiAgICAgIHN0YXJ0LAogICAgICBlbmQKICAgIH0pIHsKICAgICAgaWYgKCFlbmQpIHsKICAgICAgICBlbmQgPSBzdGFydDsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmNtLmRvYy5zb21ldGhpbmdTZWxlY3RlZCgpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2hvd05vdGlmaWNhdGlvbicsIHsKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2VkaXRvcjptYXJrdXAubm9TZWxlY3Rpb25FcnJvcicpLAogICAgICAgICAgc3R5bGU6ICd3YXJuaW5nJywKICAgICAgICAgIGljb246ICd3YXJuaW5nJwogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmNtLmRvYy5yZXBsYWNlU2VsZWN0aW9ucyh0aGlzLmNtLmRvYy5nZXRTZWxlY3Rpb25zKCkubWFwKHMgPT4gc3RhcnQgKyBzICsgZW5kKSk7CiAgICB9LAoKICAgIHNldEhlYWRlckxpbmUobHZsKSB7CiAgICAgIGNvbnN0IGN1ckxpbmUgPSB0aGlzLmNtLmRvYy5nZXRDdXJzb3IoJ2hlYWQnKS5saW5lOwogICAgICBsZXQgbGluZUNvbnRlbnQgPSB0aGlzLmNtLmRvYy5nZXRMaW5lKGN1ckxpbmUpOwogICAgICBjb25zdCBsaW5lTGVuZ3RoID0gbGluZUNvbnRlbnQubGVuZ3RoOwoKICAgICAgaWYgKF9zdGFydHNXaXRoKGxpbmVDb250ZW50LCAnPScpKSB7CiAgICAgICAgbGluZUNvbnRlbnQgPSBsaW5lQ29udGVudC5yZXBsYWNlKC9eKD0rICkvLCAnJyk7CiAgICAgIH0KCiAgICAgIGxpbmVDb250ZW50ID0gX3RpbWVzKGx2bCwgbiA9PiAnPScpLmpvaW4oJycpICsgYCBgICsgbGluZUNvbnRlbnQ7CiAgICAgIHRoaXMuY20uZG9jLnJlcGxhY2VSYW5nZShsaW5lQ29udGVudCwgewogICAgICAgIGxpbmU6IGN1ckxpbmUsCiAgICAgICAgY2g6IDAKICAgICAgfSwgewogICAgICAgIGxpbmU6IGN1ckxpbmUsCiAgICAgICAgY2g6IGxpbmVMZW5ndGgKICAgICAgfSk7CiAgICB9LAoKICAgIHRvZ2dsZUZ1bGxzY3JlZW4oKSB7CiAgICAgIHRoaXMuY20uc2V0T3B0aW9uKCdmdWxsU2NyZWVuJywgdHJ1ZSk7CiAgICB9LAoKICAgIHJlZnJlc2goKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmNtLnJlZnJlc2goKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGluc2VydExpbmsoKSB7CiAgICAgIHRoaXMuaW5zZXJ0TGlua0RpYWxvZyA9IHRydWU7CiAgICB9LAoKICAgIGluc2VydExpbmtIYW5kbGVyKHsKICAgICAgbG9jYWxlLAogICAgICBwYXRoCiAgICB9KSB7CiAgICAgIGNvbnN0IGxhc3RQYXJ0ID0gX2xhc3QocGF0aC5zcGxpdCgnLycpKTsKCiAgICAgIHRoaXMuaW5zZXJ0QXRDdXJzb3IoewogICAgICAgIGNvbnRlbnQ6IHNpdGVMYW5ncy5sZW5ndGggPiAwID8gYGxpbms6LyR7bG9jYWxlfS8ke3BhdGh9WyR7bGFzdFBhcnR9XWAgOiBgbGluazovJHtwYXRofVske2xhc3RQYXJ0fV1gCiAgICAgIH0pOwogICAgfSwKCiAgICBwcm9jZXNzTWFya2Vycyhmcm9tLCB0bykgewogICAgICBsZXQgZm91bmQgPSBudWxsOwogICAgICBsZXQgZm91bmRTdGFydCA9IDA7CiAgICAgIHRoaXMuY20uZG9jLmdldEFsbE1hcmtzKCkuZm9yRWFjaChtayA9PiB7CiAgICAgICAgaWYgKG1rLl9fa2luZCkgewogICAgICAgICAgbWsuY2xlYXIoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmNtLmVhY2hMaW5lKGZyb20sIHRvLCBsbiA9PiB7CiAgICAgICAgY29uc3QgbGluZSA9IGxuLmxpbmVObygpOwoKICAgICAgICBpZiAobG4udGV4dC5zdGFydHNXaXRoKCdgYGBkaWFncmFtJykpIHsKICAgICAgICAgIGZvdW5kID0gJ2RpYWdyYW0nOwogICAgICAgICAgZm91bmRTdGFydCA9IGxpbmU7CiAgICAgICAgfSBlbHNlIGlmIChsbi50ZXh0ID09PSAnYGBgJyAmJiBmb3VuZCkgewogICAgICAgICAgc3dpdGNoIChmb3VuZCkgewogICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgLy8gLT4gRElBR1JBTQogICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgY2FzZSAnZGlhZ3JhbSc6CiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKGxpbmUgLSBmb3VuZFN0YXJ0ICE9PSAyKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLmFkZE1hcmtlcih7CiAgICAgICAgICAgICAgICAgIGtpbmQ6ICdkaWFncmFtJywKICAgICAgICAgICAgICAgICAgZnJvbTogewogICAgICAgICAgICAgICAgICAgIGxpbmU6IGZvdW5kU3RhcnQsCiAgICAgICAgICAgICAgICAgICAgY2g6IDMKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgdG86IHsKICAgICAgICAgICAgICAgICAgICBsaW5lOiBmb3VuZFN0YXJ0LAogICAgICAgICAgICAgICAgICAgIGNoOiAxMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB0ZXh0OiAnRWRpdCBEaWFncmFtJywKICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoKHN0YXJ0LCBlbmQpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXYgPT4gewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbS5kb2Muc2V0U2VsZWN0aW9uKHsKICAgICAgICAgICAgICAgICAgICAgICAgbGluZTogc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNoOiAwCiAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGVuZCwKICAgICAgICAgICAgICAgICAgICAgICAgY2g6IDMKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhdyA9IHRoaXMuY20uZG9jLmdldExpbmUoZW5kIC0gMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnNldCgnZWRpdG9yL2FjdGl2ZU1vZGFsRGF0YScsIEJ1ZmZlci5mcm9tKHJhdywgJ2Jhc2U2NCcpLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZU1vZGFsKGBlZGl0b3JNb2RhbERyYXdpb2ApOwogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5jb21taXQoJ3Nob3dOb3RpZmljYXRpb24nLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBwcm9jZXNzIGRpYWdyYW0gZGF0YS4nLAogICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnd2FybmluZycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0pKGZvdW5kU3RhcnQsIGxpbmUpCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAobG4uaGVpZ2h0ID4gMCkgewogICAgICAgICAgICAgICAgICB0aGlzLmNtLmZvbGRDb2RlKGZvdW5kU3RhcnQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmb3VuZCA9IG51bGw7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgYWRkTWFya2VyKHsKICAgICAga2luZCwKICAgICAgZnJvbSwKICAgICAgdG8sCiAgICAgIHRleHQsCiAgICAgIGFjdGlvbgogICAgfSkgewogICAgICBjb25zdCBtYXJrZXJFbG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIG1hcmtlckVsbS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KSk7CiAgICAgIG1hcmtlckVsbS5jbGFzc05hbWUgPSAnQ29kZU1pcnJvci1idXR0b25tYXJrZXInOwogICAgICBtYXJrZXJFbG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhY3Rpb24pOwogICAgICB0aGlzLmNtLm1hcmtUZXh0KGZyb20sIHRvLCB7CiAgICAgICAgcmVwbGFjZWRXaXRoOiBtYXJrZXJFbG0sCiAgICAgICAgX19raW5kOiBraW5kCiAgICAgIH0pOwogICAgfQoKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy4kc3RvcmUuc2V0KCdlZGl0b3IvZWRpdG9yS2V5JywgJ2FzY2lpZG9jJyk7CgogICAgaWYgKHRoaXMubW9kZSA9PT0gJ2NyZWF0ZScpIHsKICAgICAgdGhpcy4kc3RvcmUuc2V0KCdlZGl0b3IvY29udGVudCcsICc9PSBoZWFkZXJcblxuY29udGVudCcpOwogICAgfSAvLyBJbml0aWFsaXplIENvZGVNaXJyb3IKCgogICAgdGhpcy5jbSA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKHRoaXMuJHJlZnMuY20sIHsKICAgICAgdGFiU2l6ZTogMiwKICAgICAgbW9kZTogJ2FzY2lpZG9jJywKICAgICAgdGhlbWU6ICd3aWtpanMtZGFyaycsCiAgICAgIGxpbmVOdW1iZXJzOiB0cnVlLAogICAgICBsaW5lV3JhcHBpbmc6IHRydWUsCiAgICAgIGxpbmU6IHRydWUsCiAgICAgIHN0eWxlQWN0aXZlTGluZTogdHJ1ZSwKICAgICAgaGlnaGxpZ2h0U2VsZWN0aW9uTWF0Y2hlczogewogICAgICAgIGFubm90YXRlU2Nyb2xsYmFyOiB0cnVlCiAgICAgIH0sCiAgICAgIHZpZXdwb3J0TWFyZ2luOiA1MCwKICAgICAgaW5wdXRTdHlsZTogJ2NvbnRlbnRlZGl0YWJsZScsCiAgICAgIGFsbG93RHJvcEZpbGVUeXBlczogWydpbWFnZS9qcGcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL3N2ZycsICdpbWFnZS9qcGVnJywgJ2ltYWdlL2dpZiddLAogICAgICBkaXJlY3Rpb246IHNpdGVDb25maWcucnRsID8gJ3J0bCcgOiAnbHRyJywKICAgICAgZm9sZEd1dHRlcjogdHJ1ZSwKICAgICAgZ3V0dGVyczogWydDb2RlTWlycm9yLWxpbmVudW1iZXJzJywgJ0NvZGVNaXJyb3ItZm9sZGd1dHRlciddCiAgICB9KTsKICAgIHRoaXMuY20uc2V0VmFsdWUodGhpcy4kc3RvcmUuZ2V0KCdlZGl0b3IvY29udGVudCcpKTsKICAgIHRoaXMuY20ub24oJ2NoYW5nZScsIGMgPT4gewogICAgICB0aGlzLiRzdG9yZS5zZXQoJ2VkaXRvci9jb250ZW50JywgYy5nZXRWYWx1ZSgpKTsKICAgICAgdGhpcy5vbkNtSW5wdXQodGhpcy4kc3RvcmUuZ2V0KCdlZGl0b3IvY29udGVudCcpKTsKICAgIH0pOwoKICAgIGlmICh0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQubWRBbmRVcCkgewogICAgICB0aGlzLmNtLnNldFNpemUobnVsbCwgJ2NhbGMoMTAwdmggLSAxMzdweCknKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY20uc2V0U2l6ZShudWxsLCAnY2FsYygxMDB2aCAtIDExMnB4IC0gMTZweCknKTsKICAgIH0gLy8gU2V0IEtleWJpbmRpbmdzCgoKICAgIGNvbnN0IGtleUJpbmRpbmdzID0gewogICAgICAnRjExJyhjKSB7CiAgICAgICAgYy5zZXRPcHRpb24oJ2Z1bGxTY3JlZW4nLCAhYy5nZXRPcHRpb24oJ2Z1bGxTY3JlZW4nKSk7CiAgICAgIH0sCgogICAgICAnRXNjJyhjKSB7CiAgICAgICAgaWYgKGMuZ2V0T3B0aW9uKCdmdWxsU2NyZWVuJykpIGMuc2V0T3B0aW9uKCdmdWxsU2NyZWVuJywgZmFsc2UpOwogICAgICB9CgogICAgfTsKCiAgICBfc2V0KGtleUJpbmRpbmdzLCBgJHtDdHJsS2V5fS1CYCwgYyA9PiB7CiAgICAgIHRoaXMudG9nZ2xlTWFya3VwKHsKICAgICAgICBzdGFydDogYCoqYAogICAgICB9KTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CgogICAgX3NldChrZXlCaW5kaW5ncywgYCR7Q3RybEtleX0tSWAsIGMgPT4gewogICAgICB0aGlzLnRvZ2dsZU1hcmt1cCh7CiAgICAgICAgc3RhcnQ6IGBfX2AKICAgICAgfSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwoKICAgIHRoaXMuY20uc2V0T3B0aW9uKCdleHRyYUtleXMnLCBrZXlCaW5kaW5ncyk7IC8vIEhhbmRsZSBjdXJzb3IgbW92ZW1lbnQKCiAgICB0aGlzLmNtLm9uKCdjdXJzb3JBY3Rpdml0eScsIGMgPT4gewogICAgICB0aGlzLnBvc2l0aW9uU3luYyhjKTsKICAgIH0pOyAvLyBSZW5kZXIgaW5pdGlhbCBwcmV2aWV3CgogICAgdGhpcy5wcm9jZXNzQ29udGVudCh0aGlzLiRzdG9yZS5nZXQoJ2VkaXRvci9jb250ZW50JykpOwogICAgdGhpcy4kcm9vdC4kb24oJ2VkaXRvckluc2VydCcsIG9wdHMgPT4gewogICAgICBzd2l0Y2ggKG9wdHMua2luZCkgewogICAgICAgIGNhc2UgJ0lNQUdFJzoKICAgICAgICAgIGxldCBpbWcgPSBgaW1hZ2U6OiR7b3B0cy5wYXRofVske29wdHMudGV4dH1dYDsKICAgICAgICAgIHRoaXMuaW5zZXJ0QXRDdXJzb3IoewogICAgICAgICAgICBjb250ZW50OiBpbWcKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ0JJTkFSWSc6CiAgICAgICAgICB0aGlzLmluc2VydEF0Q3Vyc29yKHsKICAgICAgICAgICAgY29udGVudDogYGxpbms6JHtvcHRzLnBhdGh9WyR7b3B0cy50ZXh0fV1gCiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdESUFHUkFNJzoKICAgICAgICAgIGNvbnN0IHNlbFN0YXJ0TGluZSA9IHRoaXMuY20uZ2V0Q3Vyc29yKCdmcm9tJykubGluZTsKICAgICAgICAgIGNvbnN0IHNlbEVuZExpbmUgPSB0aGlzLmNtLmdldEN1cnNvcigndG8nKS5saW5lICsgMTsKICAgICAgICAgIHRoaXMuY20uZG9jLnJlcGxhY2VTZWxlY3Rpb24oJ2BgYGRpYWdyYW1cbicgKyBvcHRzLnRleHQgKyAnXG5gYGBcbicsICdzdGFydCcpOwogICAgICAgICAgdGhpcy5wcm9jZXNzTWFya2VycyhzZWxTdGFydExpbmUsIHNlbEVuZExpbmUpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0pOyAvLyBIYW5kbGUgc2F2ZSBjb25mbGljdAoKICAgIHRoaXMuJHJvb3QuJG9uKCdzYXZlQ29uZmxpY3QnLCAoKSA9PiB7CiAgICAgIHRoaXMudG9nZ2xlTW9kYWwoYGVkaXRvck1vZGFsQ29uZmxpY3RgKTsKICAgIH0pOwogICAgdGhpcy4kcm9vdC4kb24oJ292ZXJ3cml0ZUVkaXRvckNvbnRlbnQnLCAoKSA9PiB7CiAgICAgIHRoaXMuY20uc2V0VmFsdWUodGhpcy4kc3RvcmUuZ2V0KCdlZGl0b3IvY29udGVudCcpKTsKICAgIH0pOwogIH0sCgogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLiRyb290LiRvZmYoJ2VkaXRvckluc2VydCcpOwogIH0KCn07"},null]}